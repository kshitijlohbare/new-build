import React from 'react';
import { FitnessGroup } from '@/helpers/fitnessGroupUtils';
import './FitnessGroupCard.css';

interface FitnessGroupCardProps {
  group: FitnessGroup;
  isJoined: boolean;
  onJoin: (group: FitnessGroup) => void;
  onLeave: (group: FitnessGroup) => void;
  onClick?: () => void;
}

const FitnessGroupCard: React.FC<FitnessGroupCardProps> = ({ 
  group, 
  isJoined,
  onJoin,
  onLeave,
  onClick
}) => {
  return (
    <div 
      className="Frame13 fitness-group-card" 
      onClick={onClick}
      onMouseOver={(e) => {
        if (onClick) {
          e.currentTarget.style.transform = 'translateY(-2px)';
          e.currentTarget.style.boxShadow = '1px 4px 6px rgba(73, 217.90, 234, 0.6)';
        }
      }}
      onMouseOut={(e) => {
        if (onClick) {
          e.currentTarget.style.transform = 'translateY(0)';
          e.currentTarget.style.boxShadow = '1px 2px 4px rgba(73, 217.90, 234, 0.5)';
        }
      }}
      data-name={`fitness-group-${group.id}`}
      aria-label={`Fitness group: ${group.name}`}
      data-testid={`fitness-group-card-${group.id}`}
    >
      <div className="Frame group-header" data-name="group-header">
        <div className="Frame132 group-name" data-name="group-name-container">
          <div className="MorningRunningGroup group-title" data-name={`group-name-${group.id}`}>
            {group.name}
          </div>
        </div>
      </div>
      <div className="Frame135 group-content">
        <div className="Frame5 group-category">
          <div className="Vector">
            {/* Main SVG icon */}
            <svg width="30" height="25" viewBox="0 0 30 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.13438 24.7008H28.8656C29.1126 24.7008 29.3129 24.5005 29.3129 24.2536C29.3129 24.0066 29.1126 23.8063 28.8656 23.8063H26.1069C26.2211 23.6624 26.3237 23.5076 26.4026 23.3367C26.9472 22.1598 26.4345 20.7656 25.2564 20.2223L19.8665 17.7339V14.1972C19.9338 14.3872 19.9718 14.3444 23.2478 16.8332C24.0406 17.4313 25.1976 17.3036 25.8246 16.4725C26.4236 15.6783 26.2745 14.5323 25.4922 13.9177L22.3764 11.4707L21.3826 9.56162C20.455 7.77908 19.558 6.40559 17.353 6.31565C18.1103 5.6574 18.5919 4.69084 18.5919 3.61183C18.5919 2.45642 18.0504 1.40566 17.1385 0.736405C17.1385 0.829107 17.1495 0.648286 17.1385 0.736405C15.7959 -0.258412 14.2125 -0.232599 12.8596 0.736866C11.5066 1.70633 11.4062 2.45782 11.4062 3.61182C11.4062 4.68573 11.8836 5.64819 12.6348 6.3062C10.4579 6.34671 9.57463 7.60809 8.57584 9.38213L7.09453 12.0136L4.55736 13.925C3.75076 14.5326 3.58986 15.677 4.19825 16.4834C4.81922 17.3069 5.96567 17.4365 6.75557 16.8423L9.99791 14.3992C10.049 14.3605 10.0913 14.3113 10.1217 14.255L10.1311 14.2381V17.735L4.74349 20.222C3.57232 20.7626 3.04954 22.1512 3.59886 23.3393C3.67736 23.5092 3.77922 23.663 3.89274 23.806H1.13473C0.887773 23.806 0.6875 24.0063 0.6875 24.2533C0.6875 24.5005 0.887773 24.7007 1.13473 24.7007L1.13438 24.7008ZM15 22.1701L20.8452 23.8064L9.15458 23.8061L15 22.1701ZM12.3006 3.61203C12.3006 2.66469 12.7812 1.80705 13.5901 1.31569C14.4235 0.798187 15.523 0.79269 16.3648 1.29348C16.3799 1.30241 16.3962 1.30859 16.411 1.31798C17.2162 1.8071 17.6969 2.66469 17.6969 3.61227C17.6969 5.09727 16.4866 6.30507 14.9986 6.30507C13.5108 6.30484 12.3006 5.0968 12.3006 3.61203ZM9.38166 13.7435L6.21713 16.1282C5.81681 16.4299 5.21254 16.3424 4.91248 15.9453C4.76233 15.7464 4.69893 15.5011 4.73372 15.2545C4.76828 15.008 4.89691 14.7897 5.09558 14.64L7.70734 12.6723C7.75678 12.6352 7.79775 12.5883 7.82819 12.5345L9.35573 9.82159C10.3596 8.0377 11.0208 7.19746 12.7455 7.19746L17.129 7.20181C18.8669 7.20364 19.5723 8.02077 20.589 9.97494C22.0848 12.8087 20.8866 11.3807 24.9396 14.6215C25.3415 14.9371 25.4182 15.5258 25.1104 15.9339C24.8057 16.3374 24.1926 16.4253 23.7867 16.1193L20.6383 13.7435L19.8667 12.3228V10.8342C19.8667 10.5872 19.6664 10.3869 19.4195 10.3869C19.1725 10.3869 18.9722 10.5872 18.9722 10.8342V17.4582H11.0257C11.0198 14.1543 11.0344 14.1346 11.0038 10.8342C11.0038 10.5872 10.8035 10.3869 10.5565 10.3869C10.3096 10.3869 10.1093 10.5872 10.1093 10.8342V12.4025L9.38166 13.7435ZM4.40945 22.9614C4.07276 22.2345 4.38816 21.3721 5.11808 21.0347L10.923 18.3552H19.0769L24.8815 21.0347C25.6084 21.3707 25.9286 22.2304 25.589 22.9644C25.2573 23.6817 24.3992 24.012 23.6641 23.6728L15.9906 21.5195L16.8512 20.8773L20.8988 21.8575C21.1341 21.9157 21.3797 21.7715 21.4387 21.5282C21.4971 21.2881 21.3495 21.0464 21.1094 20.9883L16.9961 19.9922C16.9945 19.9917 16.9929 19.9924 16.9913 19.9919C16.8355 19.7358 16.5306 19.3787 15.9639 19.1476C14.6272 18.6031 12.6069 19.062 9.9592 20.5134C9.74245 20.6321 9.66302 20.9041 9.78182 21.1206C9.9006 21.3371 10.1725 21.4163 10.389 21.2979C13.3439 19.6784 14.8504 19.6786 15.5931 19.9629C15.8467 20.0602 16.0122 20.1936 16.1168 20.3092L14.7888 21.3005L6.40227 23.6483L6.33544 23.6728C5.61011 24.0079 4.74767 23.6927 4.40964 22.9614L4.40945 22.9614Z" fill="var(--Primary, #148BAF)"/>
            </svg>
          </div>
          <div className="Vector">
            {/* Small SVG dot */}
            <svg width="3" height="3" viewBox="0 0 3 3" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.04856 2.26181L2.01419 1.83037C2.23987 1.72965 2.3408 1.4653 2.24033 1.23962C2.13985 1.01394 1.87526 0.913009 1.64958 1.01349L0.683958 1.44493C0.458278 1.54564 0.357346 1.81 0.457822 2.03567C0.557842 2.2602 0.821512 2.3632 1.04856 2.26181Z" fill="var(--Primary, #148BAF)"/>
            </svg>
          </div>
          <div className="Yoga">{group.category}</div>
        </div>
        <div 
          className="group-description" 
          data-name={`group-description-${group.id}`}
        >
          {group.description}
        </div>
      </div>
      <div className="Frame131">
        <div className="Frame7">
          <div className="Vector">
            {/* Members SVG */}
            <svg width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M0.291016 0.402344H14.7091V16.4023H0.291016V0.402344Z" fill="var(--Primary, #148BAF)"/>
            </svg>
          </div>
          <div className="Vector members-icon">
            {/* Members icon SVG */}
            <svg width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fillRule="evenodd" clipRule="evenodd" d="M7.50008 16.4022C11.4698 16.4022 14.6869 14.8643 14.6869 12.966C14.6869 11.5681 12.9412 9.51708 10.4358 8.53226C9.65225 9.50101 8.62545 10.186 7.50005 10.186C6.37486 10.186 5.34793 9.50101 4.5638 8.53226C2.05901 9.51714 0.312988 11.5683 0.312988 12.966C0.312988 14.8642 3.53039 16.4022 7.50014 16.4022H7.50008ZM1.35808 12.1908C1.52655 11.8548 1.78357 11.4957 2.10115 11.1523C2.70306 10.5014 3.48634 9.9346 4.34606 9.52251C4.7036 9.88897 5.0858 10.193 5.48738 10.43C6.13667 10.8132 6.81379 11.0073 7.50005 11.0073C8.61243 11.0073 9.71444 10.4846 10.6535 9.52238C11.5133 9.93451 12.2969 10.5014 12.8988 11.1523C13.2162 11.4957 13.4732 11.8547 13.6418 12.1908C13.8273 12.5608 13.8664 12.8166 13.8664 12.966C13.8664 13.2234 13.7458 13.4901 13.5079 13.7591C13.2233 14.0808 12.7809 14.3905 12.2285 14.6545C11.6294 14.9409 10.9251 15.1672 10.1354 15.3269C9.3027 15.4952 8.41608 15.5806 7.50008 15.5806C6.58418 15.5806 5.69756 15.4952 4.86481 15.3269C4.07495 15.1672 3.37069 14.941 2.77151 14.6545C2.21908 14.3904 1.77659 14.0808 1.49188 13.7591C1.25407 13.4901 1.13349 13.2233 1.13349 12.966C1.13349 12.8166 1.17245 12.5608 1.35816 12.1908H1.35808ZM7.49976 9.05259C9.6371 9.05259 11.3698 6.20329 11.3698 4.13962C11.3698 2.07574 9.6371 0.402344 7.49976 0.402344C5.36254 0.402344 3.62973 2.07535 3.62973 4.13962C3.62973 6.20389 5.36241 9.05259 7.49976 9.05259ZM4.44766 4.13962C4.44766 3.36676 4.76102 2.63855 5.33005 2.08901C5.90789 1.53102 6.6784 1.22361 7.49976 1.22361C8.32112 1.22361 9.09176 1.53101 9.66959 2.08914C10.2386 2.63884 10.5521 3.36702 10.5521 4.13962C10.5521 4.55311 10.463 5.02513 10.2946 5.50449C10.1219 5.99588 9.87293 6.47422 9.57431 6.88784C9.2705 7.30876 8.92105 7.65349 8.56364 7.8845C8.20773 8.11462 7.84982 8.23123 7.49975 8.23123C7.14968 8.23123 6.79177 8.11462 6.43598 7.88462C6.07858 7.65351 5.72911 7.30901 5.42531 6.88809C5.12684 6.4745 4.87774 5.99613 4.70504 5.50474C4.53658 5.02539 4.44763 4.55324 4.44763 4.13966L4.44766 4.13962Z" fill="var(--Primary, #148BAF)"/>
            </svg>
          </div>
          <div 
            className="Members members-count" 
            data-name={`members-count-${group.id}`}
            aria-label={`${group.memberCount} members`}
          >
            {group.memberCount} members
          </div>
        </div>
        <div className="Frame9 group-location">
          <div className="Vector location-icon">
            {/* Location SVG */}
            <svg width="12" height="17" viewBox="0 0 12 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5.8492 1.49014C9.5561 1.49014 10.877 3.89525 10.877 6.14583C10.877 6.18814 10.8757 6.23032 10.8744 6.27263L10.8738 6.28823C10.8733 6.31283 10.8733 6.33744 10.8744 6.36204C10.875 6.37694 10.8759 6.39156 10.877 6.40772C10.8931 7.90246 10.133 9.95165 8.78928 12.0347C7.6472 13.8047 6.64933 15.2339 6.04427 15.2441C5.44401 15.2542 4.42507 13.8799 3.28883 12.1878C2.48186 10.9861 1.12915 8.637 1.12262 6.38699C1.12349 6.36998 1.1245 6.35311 1.12508 6.3361C1.12566 6.31628 1.12581 6.29646 1.12523 6.27664L1.1245 6.2467C1.12378 6.2131 1.12262 6.17964 1.12262 6.14619C1.12262 4.7462 1.58318 1.49013 5.84927 1.49013M5.84927 0.402344C1.42193 0.402344 0 3.45116 0 6.14593C0 6.19781 0.00174075 6.24996 0.0030463 6.30226C0.002321 6.32517 0 6.34752 0 6.37086C0 10.9384 4.82469 16.4023 6.05835 16.4023C7.29226 16.4023 12.0643 10.5461 11.9993 6.37086C11.9989 6.35328 11.9969 6.33627 11.9962 6.3187C11.9979 6.26121 11.9998 6.20357 11.9998 6.14607C11.9996 3.38051 10.276 0.402484 5.84933 0.402484L5.84927 0.402344Z" fill="var(--Primary, #148BAF)"/>
            </svg>
          </div>
          <div 
            className="KalyaniNagar location-text" 
            data-name={`location-text-${group.id}`}
            aria-label={`Location: ${group.location}`}
          >
            {group.location}
          </div>
        </div>
      </div>
      <div className="Frame6 group-action">
        {isJoined ? (
          <div className="IMAMember member-status" data-name="member-status">
            I'm a member
            <button 
              className="leave-button" 
              data-name={`leave-button-${group.id}`}
              aria-label={`Leave ${group.name}`}
              onClick={(e) => {
                e.stopPropagation();
                onLeave(group);
              }}
            >
              leave
            </button>
          </div>
        ) : (
          <div className="Join join-container" data-name="join-container">
            <button 
              className="join-button" 
              data-name={`join-button-${group.id}`}
              aria-label={`Join ${group.name}`}
              onClick={(e) => {
                e.stopPropagation();
                onJoin(group);
              }}
            >
              join
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default FitnessGroupCard;
